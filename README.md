# Medical News Monitor Bot

Telegram-бот для мониторинга медицинских новостных каналов и автоматической публикации контента в целевой канал.

## Функциональность

- **Мониторинг каналов**: Отслеживает 18 медицинских каналов
- **Фильтрация по времени**: Обрабатывает сообщения только в период с 20:00 17.08.2025 по 20:00 17.08.2026
- **Обработка контента**: Копирует текст и фото из исходных каналов
- **Защита от дублирования**: Предотвращает повторную обработку сообщений
- **Обработка ошибок**: Устойчив к сетевым сбоям и ошибкам

## Установка

1. **Клонируйте репозиторий**:
```bash
git clone <repository-url>
cd medical-monitor-bot
```

2. **Установите зависимости**:
```bash
pip install -r requirements.txt
```

3. **Настройте конфигурацию**:
```bash
cp config.env.example .env
# Отредактируйте .env файл с вашими данными
```

## Конфигурация

### Переменные окружения

Создайте файл `.env` со следующими переменными:

```env
API_ID=27717201
API_HASH=f64bbdb83fc622bcc52f2740348457c3
BOT_TOKEN=8325424545:AAEOUPCJYp0KFjnNUoTwUmzRfOkGt798dQE
DESTINATION_CHANNEL=@your_target_channel
```

### Получение API ключей

1. Перейдите на https://my.telegram.org/
2. Войдите в свой аккаунт
3. Создайте новое приложение
4. Скопируйте `API_ID` и `API_HASH`

### Создание бота

1. Найдите @BotFather в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания бота
4. Скопируйте полученный токен

## Мониторимые каналы

Бот отслеживает следующие каналы:
- @docters_smp
- @onco_beseda
- @minzdrav_ru
- @immunobee
- @PSOmedics
- @DrButriy
- @dr_komarovskiy
- @mediamedics
- @medach
- @redcross_ru
- @oncolya
- @ru2ch_ban
- @pornhub_pr
- @Eric_Davidich_D3
- @labkovskiy
- @toplesofficial
- @naebnet
- @Wylsared

## Запуск

```bash
python medical_monitor_bot.py
```

## Требования к целевому каналу

1. Бот должен быть добавлен в целевой канал
2. Бот должен иметь права администратора
3. Бот должен иметь права на отправку сообщений

## Логирование

Бот ведет подробные логи в файле `medical_bot.log` и выводит их в консоль.

## Особенности работы

### Обработка сообщений
- **Текст + фото**: Отправляет фото с подписью
- **Только текст**: Отправляет текстовое сообщение
- **Только фото**: Отправляет фото с оригинальной подписью
- **Служебные сообщения**: Игнорируются

### Защита от дублирования
- Каждое сообщение получает уникальный хеш
- Обработанные сообщения сохраняются в памяти
- Автоматическая очистка при превышении лимита

### Обработка ошибок
- Повторные попытки скачивания медиа
- Экспоненциальная задержка между попытками
- Автоматическая очистка временных файлов

## Структура проекта

```
medical-monitor-bot/
├── medical_monitor_bot.py    # Основной файл бота
├── requirements.txt          # Зависимости Python
├── config.env.example        # Пример конфигурации
├── README.md                 # Документация
└── medical_bot.log          # Логи (создается автоматически)
```

## Мониторинг и обслуживание

### Проверка статуса
Бот выводит информацию о:
- Количестве отслеживаемых каналов
- Периоде мониторинга
- Правах в целевом канале
- Статистике обработки сообщений

### Перезапуск
При необходимости перезапуска:
1. Остановите бота (Ctrl+C)
2. Запустите заново: `python medical_monitor_bot.py`

## Безопасность

- Не публикуйте API ключи в открытом доступе
- Используйте переменные окружения для конфиденциальных данных
- Регулярно обновляйте зависимости

## Поддержка

При возникновении проблем:
1. Проверьте логи в файле `medical_bot.log`
2. Убедитесь в правильности конфигурации
3. Проверьте права бота в целевом канале
